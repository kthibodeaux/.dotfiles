command_exists() {
  local command="$1"
  type "$command" >/dev/null 2>&1
}

if command_exists "xdg-open"; then
  command="xdg-open"
else
  command="open"
fi

file=$HOME/.fzf-tmux-pane-contents.tmp
rm $file

tmux capture-pane\; save-buffer $file
target=$(cat $file | ruby -e "ARGF.read.to_s.scan(/((http(s)?:\/\/)(\w*\.){0,1}(\w)+\.(com|org|info|net)+(\/(\w)*)*)/).each { |e| puts e.first }" | fzf-tmux | awk '{ print $1 }')

$command $target
